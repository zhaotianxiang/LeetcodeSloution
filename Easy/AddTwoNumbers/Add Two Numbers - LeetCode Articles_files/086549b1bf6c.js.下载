!function(f,c){"use strict";var n=f.module("djng.forms",[]);f.forEach(["input","select","textarea","datalist"],function(e){n.directive(e,["$compile",function(o){return{restrict:"E",require:"?^form",link:function(e,n,t,r){var i;!r||f.isUndefined(r.$name)||"hidden"===n.prop("type")||f.isUndefined(t.name)||f.isDefined(t.ngModel)||(i="dmy"+Math.abs(r.$name.split("").reduce(function(e,n){return(e=(e<<5)-e+n.charCodeAt(0))&e},0))+"."+t.name.replace(/-/g,"_"),t.$set("ngModel",i),o(n,null,9999)(e))}}}])}),n.directive("djngError",function(){return{restrict:"A",require:"?^form",link:function(e,n,t,r){var i,o=f.isElement(n)?n[0]:null;o&&r&&!f.isUndefined(t.name)&&"bound-field"===t.djngError&&((i=r[t.name]).$setValidity("bound",!1),i.$parsers.push(function(e){return e!==o.defaultValue&&(i.$setValidity("bound",!0),n.removeAttr("djng-error")),e}))}}}),n.directive("ngModel",["$log",function(l){function d(e,n){f.isDefined(n)&&(e.$setViewValue(n),f.isObject(e.$options)&&e.$commitViewValue())}return{restrict:"A",priority:1,require:["ngModel","^?form"],link:function(e,n,t,r){var i=f.isElement(n)?n[0]:null,o=r[0],a=r[1]||null,c=e.$eval(t.ngModel);if(i&&a&&!f.isDefined(c)){switch(i.tagName){case"INPUT":d(o,function(e){switch(e.type){case"radio":if(e.defaultChecked)return e.defaultValue;break;case"checkbox":if(e.defaultChecked)return!0;break;case"password":return null;default:if(e.defaultValue)return e.defaultValue}}(i));break;case"SELECT":d(o,(u=i,s=[],f.forEach(u.options,function(e){if(e.defaultSelected){if(f.element(e).prop("selected","selected"),!u.multiple)return void(s=e.value);s.push(e.value)}}),s));break;case"TEXTAREA":d(o,function(e){if(e.defaultValue)return e.defaultValue}(i));break;default:l.log("Unknown field type")}var u,s;a.$setPristine()}}}}]),n.directive("validateMultipleFields",function(){return{restrict:"A",require:"^?form",link:function(t,e,n,r){var i,o=[];function a(e){var n=!1;f.forEach(o,function(e){n=n||e.checked}),r.$setValidity("required",n),e&&(r.$dirty=!0,r.$pristine=!1,t.$apply())}if(r){try{i=f.fromJson(n.validateMultipleFields)}catch(e){if(!f.isString(n.validateMultipleFields))return;i=[n.validateMultipleFields],r=r[i]}f.forEach(e.find("input"),function(e){0<=i.indexOf(e.name)&&(o.push(e),f.element(e).on("change",a))}),e.on("$destroy",function(){f.forEach(e.find("input"),function(e){f.element(e).off("change")})}),a()}}}}),n.directive("validateDate",function(){var a=null;return{require:"?ngModel",restrict:"A",link:function(e,n,t,o){if(o){t.validateDate&&(a=new RegExp(t.validateDate,"i"));o.$parsers.push(function(e){var n,t,r,i=o.$isEmpty(e)||!(n=e)||(r=new Date(n),!isNaN(r)&&(!a||(t=a.exec(n))&&parseInt(t[2],10)===r.getMonth()+1));return o.$setValidity("date",i),i?e:c})}}}}),n.directive("validateEmail",function(){return{require:"?ngModel",restrict:"A",link:function(e,n,t,r){if(r&&r.$validators.email&&t.emailPattern){var i=new RegExp(t.emailPattern,"i");r.$validators.email=function(e){return r.$isEmpty(e)||i.test(e)}}}}}),n.factory("djangoForm",function(){function i(e){var n=e.$viewChangeListeners.push(e.clearRejected=function(){e.$message="",e.$setValidity("rejected",!0),e.$viewChangeListeners.splice(n-1,1),delete e.clearRejected})}function o(e){return f.isArray(e.$viewChangeListeners)}return{setErrors:function(r,e){if(r.$message="",r.hasOwnProperty("$error")&&f.isArray(r.$error.rejected)){var n=r.$error.rejected.concat();f.forEach(n,function(e){var n,t=e.$name;r.hasOwnProperty(t)&&(o(n=r[t])&&n.clearRejected?n.clearRejected():(n.$message="",f.forEach(n,function(e,n){e&&o(e)&&e.clearRejected&&e.clearRejected()})))})}return f.forEach(e,function(e,n){var t;0<e.length&&("__all__"===n?(r.$message=e[0],r.$setPristine()):r.hasOwnProperty(n)&&((t=r[n]).$message=e[0],t.$setValidity("rejected",!1),t.$setPristine(),o(t)?i(t):f.forEach(t,function(e,n){e&&o(e)&&i(e)})))}),function(e){for(var n in e)if(e.hasOwnProperty(n))return!0;return!1}(e)}}}),n.directive("djngBindIf",function(){return{restrict:"A",compile:function(e){return e.addClass("ng-binding"),function(e,n,t){n.data("$binding",t.ngBind),e.$watch(t.djngBindIf,function(e){e!==c&&null!==e&&n.text(e)})}}}})}(window.angular),function(o,a){"use strict";o.module("djng.rmi",[]).provider("djangoRMI",function(){var n,i;this.configure=function(e){(function e(n){o.forEach(n,function(t,r){if(!o.isObject(t))throw new Error("djangoRMI.configure got invalid data");t.hasOwnProperty("url")?(t.headers["X-Requested-With"]="XMLHttpRequest",n[r]=function(e){var n=o.copy(t);if("POST"===n.method){if(e===a)throw new Error("Calling remote method "+r+" without data object");n.data=e}else"auto"===n.method&&(e===a?n.method="GET":(n.method="POST",n.data=e));return i(n)}):e(t)})})(n=e)},this.$get=["$http",function(e){return i=e,n}]})}(window.angular),function(c,r){"use strict";c.module("djng.urls",[]).provider("djangoUrl",function(){var n="/angular/reverse/";this.setReverseUrl=function(e){n=e},this.$get=function(){return new e(n)}});var e=function(i){function o(e,n,t){for(var r=function(e){var n=[];for(var t in e)e.hasOwnProperty(t)&&n.push(t);return n.sort()}(e),i=0;i<r.length;i++)n.call(t,e[r[i]],r[i]);return r}function a(e,n){if(!n)return e;var t=[];return o(n,function(e,n){null!==e&&e!==r&&(c.isObject(e)&&(e=c.toJson(e)),("string"==typeof e||e instanceof String)&&0===e.lastIndexOf(":",0)?t.push(encodeURIComponent(n)+"="+e):t.push(encodeURIComponent(n)+"="+encodeURIComponent(e)))}),e+(-1===e.indexOf("?")?"?":"&")+t.join("&")}this.reverse=function(e,n){var t=a(i,{djng_url_name:e});if(Array.isArray(n))return o(n,function(e){t=a(t,{djng_url_args:e})}),t;var r={};return o(n,function(e,n){r["djng_url_kwarg_"+n]=e}),c.equals(r,{})?t:a(t,r)}}}(window.angular),function(j,e){"use strict";function t(){}var n=j.module("djng.websocket",[]);n.service("$websocket",function(){var n;this.connect=function(e){(n=new WebSocket(e)).onopen=this.onopen,n.onmessage=this.onmessage,n.onerror=this.onerror,n.onclose=this.onclose},this.send=function(e){n.send(e)},this.close=function(){n.close()}}),n.provider("djangoWebsocket",function(){var m,$={log:t,warn:t,error:t},w=null,n=j.injector(["ng"]).get("$log");this.setURI=function(e){return m=e,this},this.setHeartbeat=function(e){return w=e,this},this.setLogLevel=function(e){switch(e){case"debug":$=n;break;case"log":$.log=n.log;case"warn":$.warn=n.warn;case"error":$.error=n.error}return this},this.$get=["$websocket","$q","$timeout","$interval",function(a,c,n,t){var u,s,l,d,f=!1,g=!1,r=!1,i=0,o=null,h=0;function v(){try{if(3<++h)throw new Error("Too many missed heartbeats.");a.send(w)}catch(e){t.cancel(o),o=null,$.warn("Closing connection. Reason: "+e.message),a.close()}}function e(e,n){r||j.equals(n,e)||a.send(j.toJson(e))}function p(){l.$watchCollection(d,e)}return a.onopen=function(e){$.log("Connected"),s.resolve(),i=0,w&&null===o&&(h=0,o=t(v,5e3))},a.onclose=function(e){$.log("Disconnected"),s.reject(),i=Math.min(i+1e3,1e4),n(function(){a.connect(u)},i)},a.onerror=function(e){$.error("Websocket connection is broken!"),a.close()},a.onmessage=function(n){var e;if(n.data!==w){try{e=j.fromJson(n.data)}catch(e){return void $.warn("Data received by server is invalid JSON: "+n.data)}f&&(r=!0,l.$apply(function(){j.extend(l[d],e)}),r=!1)}else h=0},{connect:function(e,n,t,r){var i,o;return l=e,i=r,j.forEach(i,function(e){"subscribe"===e.substring(0,9)?f=!0:"publish"===e.substring(0,7)&&(g=!0)}),l[d=n]=l[d]||{},(o=[m,t,"?"]).push(r.join("&")),u=o.join(""),$.log("Connecting to "+u),s=c.defer(),a.connect(u),g&&s.promise.then(p),s.promise}}}]})}(window.angular);

var renderMath=function(){$("script[type='math/tex; mode=display']").replaceWith(function(){var t=$(this).text();return"\n"===t[0]?'<p class="maths">'+t+"</p>":'<span class="maths">'+t+"</span>"}),Array.prototype.slice.call(document.querySelectorAll(".maths")).forEach(function(t){!function(e){var a="block"===window.getComputedStyle(e).display,r=e.textContent;try{e.classList.add("katex-rendered"),katex.render(r,e,{displayMode:a})}catch(t){e.textContent="\\"+(a?"[":"(")+r+"\\"+(a?"]":")"),MathJax.Hub.Queue(["Typeset",MathJax.Hub,e])}}(t)})};try{module.exports={renderMath:renderMath}}catch(t){}

jQuery(document).ready(function(e){renderMath()});

var oldArticleNav=$(".toc"),questionPreview=$("#question-preview"),quickNav=$("#quick-nav");0!==oldArticleNav.length?($(".toc > ul").length===$(".toc ul").length&&quickNav.addClass("one-level"),quickNav.html(oldArticleNav.html()),oldArticleNav.addClass("hide"),$("#no-nav-nav").addClass("hide"),$("#has-nav-nav").removeClass("hide")):(questionPreview.removeClass("col-md-8"),questionPreview.addClass("col-xs-12")),$(".editorial-base.hide").removeClass("hide");

function anchorOffset(){var o=$(window).width()<768?110:70;0!==location.hash.length&&window.scrollTo(window.scrollX,window.scrollY-o)}$(document).on("click",'li a[href^="#"]',function(){window.setTimeout(function(){anchorOffset()},0)}),window.setTimeout(anchorOffset,1e3);

function supportTap(t){for(var p=document.querySelectorAll(t),o=0;o<p.length;o++)p[o].onclick=function(){return window.location=this.getAttribute("href"),!1}}supportTap(".tap a"),supportTap(".touch a"),supportTap("a.tap"),supportTap("a.touch");
